<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>다음 지도 API</title>
	<script src="http://apis.daum.net/maps/maps3.js?apikey=85408a753736ff06d20d2686bdc44130"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
</head>
<body>
	<div id="map" style="width:750px;height:350px;"></div>
</body>

	<script>
	var mapContainer = document.getElementById('map'); // 지도를 표시할 div 
     
	var locPosition = new daum.maps.LatLng(33.450701, 126.570667);
	
	var mapOption = { 
	        center: locPosition, // 지도의 중심좌표
	        level: 3 // 지도의 확대 레벨 
	};
		
	var map = new daum.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
		
	// HTML5의 geolocation으로 사용할 수 있는지 확인합니다 
	if (navigator.geolocation) {
	    
	    // GeoLocation을 이용해서 접속 위치를 얻어옵니다
	    navigator.geolocation.getCurrentPosition(function(position) {
	        
	        var lat = position.coords.latitude; // 위도
	        var lon = position.coords.longitude; // 경도
	        
	        locPosition = new daum.maps.LatLng(lat, lon); // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다.
	      
	    });
	    
	} else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
	    
	    locPosition = new daum.maps.LatLng(33.450701, 126.570667);    
	    
	}	
	
	// 지도 타입 변경 컨트롤을 생성한다
	var mapTypeControl = new daum.maps.MapTypeControl();

	// 지도의 상단 우측에 지도 타입 변경 컨트롤을 추가한다
	map.addControl(mapTypeControl, daum.maps.ControlPosition.TOPRIGHT);	

	// 지도에 확대 축소 컨트롤을 생성한다
	var zoomControl = new daum.maps.ZoomControl();

	// 지도의 우측에 확대 축소 컨트롤을 추가한다
	map.addControl(zoomControl, daum.maps.ControlPosition.RIGHT);
	
	 // 지도 중심좌표를 접속위치로 변경합니다
    map.setCenter(locPosition);   	
	
    $( document ).ready(function() {    	
    	 var positions = new Array(100);
    	 var base_lat = 33.450705;
    	 var base_lng = 126.570677;
    	 
    	 for(var i=0;i < 100;i++){
    		 var sub = new Object();
    		 sub['title'] = 'title'+i;
    		 sub['lat'] = base_lat + i/10000;
    		 
    		 if(i%10 == 0){
    			 base_lng = base_lng + i/100000;
    		 }
    		 sub['lng'] = base_lng;
    		 
    		 positions[i] = sub;
    	}
    	
    	// 마커 이미지의 이미지 주소입니다
		var imageSrc = "http://i1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 
		/* 
    	var paths = [
             {
            	 title:'범위1',
            	 path:[
           	        {lat:33.450705, lng:126.570677},
         			{lat:33.450705, lng:126.571677},
          			{lat:33.451705, lng:126.571677},
          			{lat:33.451705, lng:126.570677}              	         
            	 ]
             },
             {
            	 title:'범위2',
            	 path:[
       				{lat:33.450705, lng:126.570677},
    				{lat:33.450705, lng:126.574677}          	         
            	 ]            	 
             }
		];
		 */
		 
		var paths = new Array(100);
    	var polygon_base_lat = 33.450705;
    	var polygon_base_lng = 126.570677;
    	var sub_polygon_lat = polygon_base_lat;
    	var sub_polygon_lng = polygon_base_lng;
		
		for(var k=0;k<paths.length;k++){
			var sub = new Object();
			
			sub['title'] = 'title'+i;
			
			sub_polygon_lat = polygon_base_lat + k/10000;
			sub_polygon_lng = polygon_base_lng  + k/10000;
			var nemo_lng = sub_polygon_lng+ 1/10000;
			var nemo_lat = sub_polygon_lat+ 1/10000;
			
			var sub_sub = [
				{lat:sub_polygon_lat,lng:sub_polygon_lng},
				{lat:sub_polygon_lat,lng:nemo_lng},
				{lat:nemo_lat,lng:nemo_lng},
				{lat:nemo_lat,lng:sub_polygon_lng}
			];
				
			sub['path'] = sub_sub;
			paths[k] = sub;

		}
		
		make_maker(positions,imageSrc);
		make_polygon(paths);
    });
    
    function getMapLatLng(lat,lng){
    	return new daum.maps.LatLng(lat,lng);
    }
		
	function make_maker( positions, imageUrl){
		    
		for (var i = 0; i < positions.length; i ++) {
		    
		    // 마커 이미지의 이미지 크기 입니다
		    var imageSize = new daum.maps.Size(24, 35); 
		    
		    // 마커 이미지를 생성합니다    
		    var markerImage = new daum.maps.MarkerImage(imageUrl, imageSize); 
		    
		    //console.log(positions[i].latlng.lat);
		    
		    var pos = getMapLatLng(positions[i].lat,positions[i].lng);
		    //console.log(position);
		    // 마커를 생성합니다
		    var marker = new daum.maps.Marker({
		        map: map, // 마커를 표시할 지도
		        position: pos, // 마커를 표시할 위치
		        title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
		        image : markerImage // 마커 이미지 
		    });
		    
		 /*    
			// 마커 위에 표시할 인포윈도우를 생성한다
			var infowindow = new daum.maps.InfoWindow({
			    content : '<div style="padding:5px;">인포윈도우 :D</div>' // 인포윈도우에 표시할 내용
			});
		
			// 인포윈도우를 지도에 표시한다
			infowindow.open(map, marker);
		 */
			// 마커에 클릭 이벤트를 등록한다 (우클릭 : rightclick)
			daum.maps.event.addListener(marker, 'click', function() {
			    alert('마커를 클릭했습니다!');
			});			    
		}
	
	
	}
	
	function make_polygon(paths){
		for(var i = 0; i< paths.length;i++){
			var listPath = paths[i].path;
			var path = new Array(listPath.length);
			
			
			for(var j=0;j<listPath.length;j++){
				path[j] = getMapLatLng(listPath[j].lat,listPath[j].lng);
			}
			
			var polygon = new daum.maps.Polygon({
				map : map, // 다각형을 표시할 지도 객체
				path : path,// 다각형을 구성하는 좌표 배열
				fillColor: '#FF0000', // 채움 색
				fillOpacity: 0.5, // 채움 불투명도
				strokeWeight: 3, // 선의 두께 
				strokeColor: '#FF0000', // 선 색
				strokeOpacity: 0.9, // 선 투명도
				strokeStyle: 'solid' // 선 스타일			
			});

			// 도형에 mouseover 이벤트를 등록한다 
			daum.maps.event.addListener(polygon, 'mouseover', function() {
				console.log('도형에 mouseover 이벤트가 발생했습니다!');
			});
		
			// 도형에 mouseout 이벤트를 등록한다 
			daum.maps.event.addListener(polygon, 'mouseout', function() {
				console.log('도형에 mouseout 이벤트가 발생했습니다!');
			});
		
			// 도형에 mousedown 이벤트를 등록한다
			daum.maps.event.addListener(polygon, 'mousedown', function() {
				console.log('도형에 mousedown 이벤트가 발생했습니다!');
			});					
		}
		

	}

	</script>
</html>